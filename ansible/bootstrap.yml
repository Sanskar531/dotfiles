- name: Manage Dotfiles
  hosts: localhost
  become: no
  tasks:
    - name: Clone repo
      git:
        repo: 'https://github.com/Sanskar531/dotfiles.git'
        dest: '{{ ansible_env.HOME }}/dotfiles'
    - name: Install packages
      ansible.builtin.package:
        name:
          - neovim
          - tmux
          - zoxide
          - exa
          - ripgrep
          - git
          - fd
          - jq
          - yq
          - fzf
          - hyperfine
          - neofetch
          - starship
          - fish
          - pipx
        state: present
    - name: Common Dependencies
      include_tasks: ./common/init.yml
    - name: MacOS Dependencies
      include_tasks: ./mac.yml
      when: ansible_facts['os_family'] == 'Darwin'
    - name: Linux Dependencies
      include_tasks: ./linux.yml
      when: ansible_facts['os_family'] == 'Archlinux'
